---
import IndexLayout from '@/layouts/IndexLayout.astro'
import Button from '@/components/ui/Button.astro'
import BackgroundShader from '@/components/ui/BackgroundShader.astro'

const base = import.meta.env.BASE_URL;
// Keep testimonials anonymous until explicit approval is provided.
// Once approved, update attribution.name/role/org per quote.
const testimonials = [
  {
    quote: 'Safety is our biggest concern',
    featured: true,
    attribution: {
      name: 'Beta program organizer',
      role: null,
      org: null
    }
  },
  {
    quote: "We've been looking for a platform that does this",
    featured: false,
    attribution: {
      name: 'Beta program organizer',
      role: null,
      org: null
    }
  },
  {
    quote: 'An upgraded Walkie Talkie',
    featured: false,
    attribution: {
      name: 'Beta program organizer',
      role: null,
      org: null
    }
  },
  {
    quote: 'Game Changer!',
    featured: false,
    attribution: {
      name: 'Beta program organizer',
      role: null,
      org: null
    }
  },
  {
    quote: 'Dude, I needed this at the gorge last weekend',
    featured: false,
    attribution: {
      name: 'Beta program attendee',
      role: null,
      org: null
    }
  },
  {
    quote: "Finally, we've needed someone to solve this for so long",
    featured: false,
    attribution: {
      name: 'Beta program attendee',
      role: null,
      org: null
    }
  },
  {
    quote: "I can't wait to send this to my friends",
    featured: false,
    attribution: {
      name: 'Beta program attendee',
      role: null,
      org: null
    }
  }
];
---

<IndexLayout
  title="Way2 â€” Imagine live events where your phone just works"
  description="Way2 is the eventOS for signal and location at festivals, sporting events, and conferences."
>
  <main class="editorial-grid">
    <BackgroundShader />
    <picture class="hero-bg-image grid-full">
      <source type="image/webp" srcset={`${base}media/embrace.webp`} />
      <img
        src={`${base}media/embrace.png`}
        alt="Two people embracing in a crowd at a live event"
        width="1440"
        height="810"
        fetchpriority="high"
      />
    </picture>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- HERO                                        -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section class="hero-section grid-full" aria-labelledby="hero-heading">
      <div class="hero-frame">
        <img
          class="hero-logo"
          src={`${base}brand/way2-logo-dark.svg`}
          alt="Way2"
          width="864"
          height="376"
          loading="eager"
          decoding="async"
        />

        <div class="hero-content">
          <h1 id="hero-heading" class="hero-headline">
            Imagine live events where your phone <span class="text-highlight">just works</span>
          </h1>
          <div class="hero-footer">
            <p class="hero-subhead">
              Way2 is the eventOS for signal & location at festivals, sporting events, and conferences.
            </p>
            <div class="hero-actions">
              <Button href="#organizers" label="For Organizers" variant="primary" />
              <Button href="#attendees" label="For Attendees" variant="secondary" />
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="network-break grid-full scroll-reveal" aria-label="How Way2 transforms live event experiences">
      <div class="network-break-inner">
        <h3 class="heading-display network-break-heading">
          Built for big crowds.<br/> Designed for operational control.
        </h3>
        <div class="network-break-body">
          <p class="network-break-kicker">Traditional networks degrade when crowds peak.</p>
          <p>
            Way2 is built to stay reliable in those moments. It turns nearby phones and on-site hardware
            into a shared communications and location layer. As more people use the network, performance
            and coverage across the venue improve:
          </p>
          <ul>
            <li>No dropped messages when crowds surge.</li>
            <li>No blind spots in safety coverage.</li>
            <li>No scrambling when cell towers overload.</li>
          </ul>
          <p><strong>The result:</strong> safer response, faster decisions, smoother attendee flow â€” a stronger digital operating layer for your event.</p>
        </div>
      </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- (01) ORGANIZERS â€” Editorial Block            -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section class="org-section grid-full" id="organizers" aria-labelledby="org-heading">
      <div class="org-inner">

        <span class="org-label label-mono scroll-reveal">(01) â€” For Organizers</span>

        <h2 id="org-heading" class="heading-display org-heading scroll-reveal">
          Your event stays connected.<br/> Your team stays coordinated.
        </h2>

        <p class="org-intro">
          Way2 provides upgraded coordination and situational awareness: secure team chat, live event views, and message broadcasting. No training, no expensive walkie-talkies, no cross-talk.
        </p>
        <p class="org-intro">
          Your ops team stays informed and in sync, even when venue infrastructure is overloaded.
        </p>

        <div class="org-features" role="list" aria-label="Organizer features">

          <article class="org-feature" style="--card-index: 0" role="listitem">
            <div class="card-body">
              <div class="card-icon" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor"><path d="M223.85,47.12a16,16,0,0,0-15-15c-12.58-.75-44.73.4-71.41,27.07L132.69,64H74.36A15.91,15.91,0,0,0,63,68.68L28.7,103a16,16,0,0,0,9.07,27.16l38.47,5.37,44.21,44.21,5.37,38.49a15.94,15.94,0,0,0,10.78,12.92,16.11,16.11,0,0,0,5.1.83A15.91,15.91,0,0,0,153,227.3L187.32,193A15.91,15.91,0,0,0,192,181.64V123.31l4.77-4.77C223.45,91.86,224.6,59.71,223.85,47.12ZM74.36,80h42.33L77.16,119.52,40,114.34Zm74.41-9.45a76.65,76.65,0,0,1,59.11-22.47,76.46,76.46,0,0,1-22.42,59.16L128,164.68,91.32,128ZM176,181.64,141.67,216l-5.19-37.17L176,139.31Zm-74.16,9.5C97.34,201,82.29,224,40,224a8,8,0,0,1-8-8c0-42.29,23-57.34,32.86-61.85a8,8,0,0,1,6.64,14.56c-6.43,2.93-20.62,12.36-23.12,38.91,26.55-2.5,36-16.69,38.91-23.12a8,8,0,1,1,14.56,6.64Z"/></svg>
              </div>
              <h3 class="org-feature-title">Easy Setup</h3>
              <p class="org-feature-body">We handle setup and logistics so your team can stay focused on showtime.</p>
            </div>
            <div class="card-footer">
              <span class="org-feature-num" aria-hidden="true">01</span>
            </div>
          </article>

          <article class="org-feature" style="--card-index: 1" role="listitem">
            <div class="card-body">
              <div class="card-icon" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor"><path d="M208,40H48A16,16,0,0,0,32,56v56c0,52.72,25.52,84.67,46.93,102.19,23.06,18.86,46,25.26,47,25.53a8,8,0,0,0,4.2,0c1-.27,23.91-6.67,47-25.53C198.48,196.67,224,164.72,224,112V56A16,16,0,0,0,208,40Zm0,72c0,37.07-13.66,67.16-40.6,89.42A129.3,129.3,0,0,1,128,223.62a128.25,128.25,0,0,1-38.92-21.81C61.82,179.51,48,149.3,48,112l0-56,160,0ZM82.34,141.66a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35a8,8,0,0,1,11.32,11.32l-56,56a8,8,0,0,1-11.32,0Z"/></svg>
              </div>
              <h3 class="org-feature-title">Safety, Simplified</h3>
              <p class="org-feature-body">Improve emergency response with precise location context and reliable team communication.</p>
            </div>
            <div class="card-footer">
              <span class="org-feature-num" aria-hidden="true">02</span>
            </div>
          </article>

          <article class="org-feature" style="--card-index: 2" role="listitem">
            <div class="card-body">
              <div class="card-icon" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor"><path d="M216,80H184V48a16,16,0,0,0-16-16H40A16,16,0,0,0,24,48V176a8,8,0,0,0,13,6.22L72,154V184a16,16,0,0,0,16,16h93.59L219,230.22a8,8,0,0,0,5,1.78,8,8,0,0,0,8-8V96A16,16,0,0,0,216,80ZM66.55,137.78,40,159.25V48H168v88H71.58A8,8,0,0,0,66.55,137.78ZM216,207.25l-26.55-21.47a8,8,0,0,0-5-1.78H88V152h80a16,16,0,0,0,16-16V96h32Z"/></svg>
              </div>
              <h3 class="org-feature-title">Superior Coordination</h3>
              <p class="org-feature-body">Real-time team messaging with role-based channels, priority escalation, and zero training overhead.</p>
            </div>
            <div class="card-footer">
              <span class="org-feature-num" aria-hidden="true">03</span>
            </div>
          </article>

          <article class="org-feature" style="--card-index: 3" role="listitem">
            <div class="card-body">
              <div class="card-icon" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor"><path d="M184,89.57V84c0-25.08-37.83-44-88-44S8,58.92,8,84v40c0,20.89,26.25,37.49,64,42.46V172c0,25.08,37.83,44,88,44s88-18.92,88-44V132C248,111.3,222.58,94.68,184,89.57ZM232,132c0,13.22-30.79,28-72,28-3.73,0-7.43-.13-11.08-.37C170.49,151.77,184,139,184,124V105.74C213.87,110.19,232,122.27,232,132ZM72,150.25V126.46A183.74,183.74,0,0,0,96,128a183.74,183.74,0,0,0,24-1.54v23.79A163,163,0,0,1,96,152,163,163,0,0,1,72,150.25Zm96-40.32V124c0,8.39-12.41,17.4-32,22.87V123.5C148.91,120.37,159.84,115.71,168,109.93ZM96,56c41.21,0,72,14.78,72,28s-30.79,28-72,28S24,97.22,24,84,54.79,56,96,56ZM24,124V109.93c8.16,5.78,19.09,10.44,32,13.57v23.37C36.41,141.4,24,132.39,24,124Zm64,48v-4.17c2.63.1,5.29.17,8,.17,3.88,0,7.67-.13,11.39-.35A121.92,121.92,0,0,0,120,171.41v23.46C100.41,189.4,88,180.39,88,172Zm48,26.25V174.4a179.48,179.48,0,0,0,24,1.6,183.74,183.74,0,0,0,24-1.54v23.79a165.45,165.45,0,0,1-48,0Zm64-3.38V171.5c12.91-3.13,23.84-7.79,32-13.57V172C232,180.39,219.59,189.4,200,194.87Z"/></svg>
              </div>
              <h3 class="org-feature-title">App Profitability</h3>
              <p class="org-feature-body">Turn your event app from a cost center into a measurable revenue channel.</p>
            </div>
            <div class="card-footer">
              <span class="org-feature-num" aria-hidden="true">04</span>
            </div>
          </article>

          <article class="org-feature" style="--card-index: 4" role="listitem">
            <div class="card-body">
              <div class="card-icon" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor"><path d="M228.92,49.69a8,8,0,0,0-6.86-1.45L160.93,63.52,99.58,32.84a8,8,0,0,0-5.52-.6l-64,16A8,8,0,0,0,24,56V200a8,8,0,0,0,9.94,7.76l61.13-15.28,61.35,30.68A8.15,8.15,0,0,0,160,224a8,8,0,0,0,1.94-.24l64-16A8,8,0,0,0,232,200V56A8,8,0,0,0,228.92,49.69ZM104,52.94l48,24V203.06l-48-24ZM40,62.25l48-12v127.5l-48,12Zm176,131.5-48,12V78.25l48-12Z"/></svg>
              </div>
              <h3 class="org-feature-title">Custom Interactive Maps</h3>
              <p class="org-feature-body">Help attendees find stages, services, and premium experiences without confusion.</p>
            </div>
            <div class="card-footer">
              <span class="org-feature-num" aria-hidden="true">05</span>
            </div>
          </article>

          <article class="org-feature" style="--card-index: 5" role="listitem">
            <div class="card-body">
              <div class="card-icon" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor"><path d="M248,80a28,28,0,1,0-51.12,15.77l-26.79,33L146,73.4a28,28,0,1,0-36.06,0L85.91,128.74l-26.79-33a28,28,0,1,0-26.6,12L47,194.63A16,16,0,0,0,62.78,208H193.22A16,16,0,0,0,209,194.63l14.47-86.85A28,28,0,0,0,248,80ZM128,40a12,12,0,1,1-12,12A12,12,0,0,1,128,40ZM24,80A12,12,0,1,1,36,92,12,12,0,0,1,24,80ZM193.22,192H62.78L48.86,108.52,81.79,149A8,8,0,0,0,88,152a7.83,7.83,0,0,0,1.08-.07,8,8,0,0,0,6.26-4.74l29.3-67.4a27,27,0,0,0,6.72,0l29.3,67.4a8,8,0,0,0,6.26,4.74A7.83,7.83,0,0,0,168,152a8,8,0,0,0,6.21-3l32.93-40.52ZM220,92a12,12,0,1,1,12-12A12,12,0,0,1,220,92Z"/></svg>
              </div>
              <h3 class="org-feature-title">Premium Branded Experience</h3>
              <p class="org-feature-body">Deliver a polished, branded digital layer that strengthens trust and loyalty.</p>
            </div>
            <div class="card-footer">
              <span class="org-feature-num" aria-hidden="true">06</span>
            </div>
          </article>

          <article class="org-feature org-feature--proof" style="--card-index: 6" role="listitem">
            <div class="card-body card-body--proof">
              <div class="proof-text">
                <h3 class="org-feature-title">Proven in Extreme Crowd Conditions</h3>
                <p class="org-feature-body">Field-tested at Burning Man, where connectivity is hardest and reliable coordination matters most.</p>
              </div>
              <div class="proof-device card-depth">
                <video
                  autoplay
                  loop
                  muted
                  playsinline
                  width="220"
                  height="470"
                  aria-label="Visual walkthrough of the Way2 app experience"
                >
                  <source src={`${base}media/demo-walkthrough-loop.webm`} type="video/webm" />
                  <source src={`${base}media/demo-walkthrough.mp4`} type="video/mp4" />
                </video>
              </div>
            </div>
          </article>

        </div>

        <!-- CTA -->
        <div class="scroll-reveal">
          <h2 class="heading-display">
            Better ops.<br/> Better experience.<br/> <span class="text-gradient">Built for big crowds.</span>
          </h2>
          <Button
            href="https://docs.google.com/forms/d/e/1FAIpQLSduCM6cOmQd2xNFpeqKcyyYNI8efWHrgY4u1Rdln4XoYUSQsw/viewform?usp=header"
            label="Book Your Demo"
            variant="primary"
            target="_blank"
            rel="noopener noreferrer"
          />
        </div>

      </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- (02) ATTENDEES                              -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section class="att-section grid-full" id="attendees" aria-labelledby="att-heading">
      <div class="att-inner">

        <span class="att-label label-mono scroll-reveal">(02) â€” For Attendees</span>

        <h2 id="att-heading" class="heading-display att-heading scroll-reveal">
          Find Your Friends,<br />No Matter What
        </h2>
        <p class="att-bridge body-l scroll-reveal">
          Way2 turns every attendee's phone into a personal event guide, safety tool, and friend finder.
        </p>

        <div class="att-content">
          <div class="phone-cluster scroll-reveal">
            <img
              class="phone-mockup phone-chat"
              src={`${base}media/tg-proto-chat.webp`}
              alt="Way2 chat interface showing group messaging in a crowd"
              width="280"
              height="600"
              loading="lazy"
              decoding="async"
            />
            <div class="phone-sizzle card-depth">
              <video
                autoplay
                loop
                muted
                playsinline
                width="230"
                height="490"
                aria-label="Way2 app demo showing live friend-finding and communication"
              >
                <source src={`${base}media/tg-proto-sizzle.webm`} type="video/webm" />
                <source src={`${base}media/tg-proto-sizzle.mp4`} type="video/mp4" />
              </video>
            </div>
            <img
              class="phone-mockup phone-ar"
              src={`${base}media/tg-proto-ar.webp`}
              alt="Way2 AR view showing friend locations overlaid on camera"
              width="280"
              height="600"
              loading="lazy"
              decoding="async"
            />
          </div>

          <ul class="feature-pills" role="list">
            <li style="--pill-rotate: -2deg; --pill-bg: var(--colors-teal-95)"><span class="pill-icon" aria-hidden="true">ğŸŒ</span> <strong>Local Connection</strong> <span class="pill-desc">â€” Works phone-to-phone in packed venues, even when internet is unstable or unavailable (yes, even in airplane mode).</span></li>
            <li style="--pill-rotate: 1.5deg; --pill-bg: var(--colors-fuchsia-99)"><span class="pill-icon" aria-hidden="true">ğŸ“</span> <strong>Friend Finding</strong> <span class="pill-desc">â€” See where your crew is and get clear directions to meet up.</span></li>
            <li style="--pill-rotate: -1deg; --pill-bg: var(--colors-yellow-100)"><span class="pill-icon" aria-hidden="true">ğŸ—ºï¸</span> <strong>Live Event Map</strong> <span class="pill-desc">â€” Find stages, your tent, and the shortest line for food, restrooms, water, merch, and other essentials.</span></li>
            <li style="--pill-rotate: 2deg; --pill-bg: var(--colors-indigo-90)"><span class="pill-icon" aria-hidden="true">ğŸ›Ÿ</span> <strong>Safety First</strong> <span class="pill-desc">â€” Share check-ins, request help, or route directly to on-site medical when needed.</span></li>
            <li style="--pill-rotate: -1.5deg; --pill-bg: var(--colors-green-100)"><span class="pill-icon" aria-hidden="true">ğŸ”</span> <strong>Private by Design</strong> <span class="pill-desc">â€” Only people you trust can see where you are.</span></li>
          </ul>
        </div>

        <blockquote class="pull-quote scroll-reveal">
          <p>Never lose your&nbsp;crew&nbsp;again</p>
          <div class="pull-quote-cta">
            <Button
              href="https://docs.google.com/forms/d/e/1FAIpQLSduCM6cOmQd2xNFpeqKcyyYNI8efWHrgY4u1Rdln4XoYUSQsw/viewform?usp=header"
              label="Get the App"
              variant="primary"
              target="_blank"
              rel="noopener noreferrer"
            />
            <p class="pull-quote-support">Just an app<br/> No expensive hardware</p>
          </div>
        </blockquote>

      </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- (03) TESTIMONIALS                           -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section class="testimonials-section grid-full" aria-label="Testimonials">
      
      <h3 class="heading-display scroll-reveal" style="text-align:center;">
        What People Are Saying
      </h3>

      <div class="testimonials-grid">
        {testimonials.map((testimonial) => (
          <blockquote class:list={['testimonial-card', testimonial.featured && 'testimonial-featured', 'scroll-reveal']}>
            <span class="testimonial-quote-mark" aria-hidden="true">&ldquo;</span>
            <p class="testimonial-text">{testimonial.quote}</p>
            <footer class="testimonial-footer">
              <div class="testimonial-meta">
                <cite class="testimonial-name">{testimonial.attribution.name}</cite>
                <span class="testimonial-role">
                  {testimonial.attribution.org
                    ? `${testimonial.attribution.role}, ${testimonial.attribution.org}`
                    : testimonial.attribution.role}
                </span>
              </div>
            </footer>
          </blockquote>
        ))}
      </div>
    </section>

  </main>
</IndexLayout>

<!-- Scroll reveal observer -->
<script>
  function initScrollReveal() {
    const els = document.querySelectorAll('.scroll-reveal');
    if (!els.length) return;

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add('in-view');
            observer.unobserve(entry.target);
          }
        });
      },
      { threshold: 0.1, rootMargin: '0px 0px -40px 0px' }
    );

    els.forEach((el) => observer.observe(el));
  }

  initScrollReveal();
  document.addEventListener('astro:page-load', initScrollReveal);
</script>

<!-- Stacking cards scroll animation -->
<script>
  import { gsap } from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  function initStackingCards() {
    // Respect reduced motion
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;

    const cards = gsap.utils.toArray<HTMLElement>('.org-feature');
    if (!cards.length) return;

    const totalCards = cards.length;

    // Scale-down: each card shrinks as the NEXT card scrolls up to cover it
    cards.forEach((card, i) => {
      if (i === totalCards - 1) return; // last card has nothing covering it

      const nextCard = cards[i + 1];

      gsap.to(card, {
        scale: 0.95,
        y: -20,
        transformOrigin: 'top center',
        scrollTrigger: {
          trigger: nextCard,
          start: 'top bottom',   // next card enters viewport from below
          end: 'top 10%',        // next card reaches its sticky position
          scrub: true,
        },
      });
    });

    // Content entrance: heading + body fade in on each card
    cards.forEach((card) => {
      const heading = card.querySelector('.org-feature-title');
      const body = card.querySelector('.org-feature-body');

      if (heading && body) {
        const tl = gsap.timeline({
          scrollTrigger: {
            trigger: card,
            start: 'top 80%',
            toggleActions: 'play none none reverse',
          },
        });

        tl.from(heading, { y: 30, duration: 1, ease: 'power3.out' })
          .from(body, { y: 20, duration: 1, ease: 'power3.out' }, '-=0.8');
      }
    });
  }

  function initFeaturePills() {
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;

    const container = document.querySelector('.att-content');
    const pills = gsap.utils.toArray<HTMLElement>('.feature-pills li');
    if (!container || !pills.length) return;

    const finalRotations = [-2, 1.5, -1, 2, -1.5];

    // Start all pills hidden (scale 0, offset)
    gsap.set(pills, { scale: 0, y: 30 });

    const tl = gsap.timeline({
      scrollTrigger: {
        trigger: container,
        start: 'top 90%',
        end: 'top 20%',
        scrub: 0.3,
      },
    });

    // Each pill flies in one at a time
    pills.forEach((pill, i) => {
      tl.to(pill, {
        scale: 1,
        y: 0,
        rotation: finalRotations[i],
        duration: 1,
      }, i * 1.4);
    });
  }

  function cleanupStackingCards() {
    ScrollTrigger.getAll().forEach((st) => st.kill());
  }

  initStackingCards();
  initFeaturePills();

  document.addEventListener('astro:page-load', () => {
    cleanupStackingCards();
    initStackingCards();
    initFeaturePills();
  });

  document.addEventListener('astro:before-swap', cleanupStackingCards);
</script>

<style>
  /* â”€â”€â”€ Scroll Reveal â”€â”€â”€ */
  .scroll-reveal {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.8s ease-out, transform 0.8s ease-out;
  }

  /* Staggered delays for cinematic entrance */
  .section-label.scroll-reveal { transition-delay: 0ms; }
  .section-heading.scroll-reveal { transition-delay: 100ms; }
  .section-body.scroll-reveal { transition-delay: 200ms; }

  .scroll-reveal.in-view {
    opacity: 1;
    transform: translateY(0);
  }

  @media (prefers-reduced-motion: reduce) {
    .scroll-reveal {
      opacity: 1;
      transform: none;
      transition: none;
    }
  }

  :root {
    --shared-inner-padding: 1.5rem;
  }

  @media (min-width: 768px) {
    :root {
      --shared-inner-padding: 4rem;
    }
  }

  /* â”€â”€â”€ Section Labels â€” sticky eyebrow â”€â”€â”€ */
  .section-label {
    /* grid-column: 1 / -1; */
    grid-column: 1 / 5;
    position: sticky;
    top: 1.5rem;
    z-index: 20;
    color: var(--colors-ink-90);
    font-size: var(--font-size-m);
    letter-spacing: 0.1ch;
    margin-bottom: 1.5rem;
    background: var(--colors-indigo-40);
    padding: 1rem;
    display: inline-block;
    border-radius: 0.5rem;
  }

  /* â”€â”€â”€ Section Headings â”€â”€â”€ */
  .section-heading {
    grid-column: 1 / -1;
    margin: 0;
  }

  /* â”€â”€â”€ Section Body â”€â”€â”€ */
  .section-body {
    grid-column: 1 / -1;
    margin: 0;
  }

  @media (min-width: 768px) {
    .section-body {
      grid-column: 2 / 7;
    }
  }

  /* â”€â”€â”€ HERO â”€â”€â”€ */
  .hero-bg-image {
    grid-row: 1;
    grid-column: 1 / -1;
    z-index: 1;
    mix-blend-mode: difference;
    pointer-events: none;
  }

  .hero-bg-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center top;
    border-radius: 1.6rem;
  }

  .hero-section {
    grid-row: 1;
    position: relative;
    z-index: 2;
  }

  .hero-frame {
    position: relative;
    z-index: 1;
    width: 100%;
    min-height: calc(100vh - calc(var(--grid-padding) * 2));
    min-height: calc(100dvh - calc(var(--grid-padding) * 2));
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
  }

  .hero-content {
    position: relative;
    z-index: 1;
    padding: 2rem var(--shared-inner-padding) 3rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .hero-headline {
    margin: 0;
    max-width: 18ch;
    font-size: var(--font-size-2xl);
    font-family: var(--font-heading);
    font-weight: 500;
    line-height: 1.1;
    letter-spacing: -0.02ch;
    overflow-wrap: break-word;
    color: var(--colors-ink-98);
  }

  .hero-logo {
    position: absolute;
    top: var(--shared-inner-padding);
    left: var(--shared-inner-padding);
    z-index: 2;
    width: clamp(9rem, 22vw, 20rem);
    height: auto;
  }

  .hero-footer {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .hero-subhead {
    margin-top: 0;
    font-size: var(--font-size-xl);
    max-width: 40ch;
  }

  .text-highlight {
    color: var(--colors-teal-95);
  }

  .hero-actions {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
  }

  @media (min-width: 768px) {
    .hero-content {
      padding: var(--shared-inner-padding);
    }
  }

  @media (min-width: 768px) and (max-width: 1279px) {
    .hero-content {
      padding-top: clamp(5rem, 10vw, 7rem);
    }

    .hero-logo {
      width: clamp(7.5rem, 18vw, 12rem);
    }
  }

  @media (min-width: 800px) {
    .hero-frame {
      min-height: max(calc(100vh - calc(var(--grid-padding) * 2)), 800px);
      min-height: max(calc(100dvh - calc(var(--grid-padding) * 2)), 800px);
    }
  }

  @media (max-width: 767px) {
    .hero-logo {
      top: 1.25rem;
      left: 1.25rem;
      width: clamp(7.25rem, 32vw, 9.5rem);
    }

    .hero-content {
      padding: 1.5rem var(--shared-inner-padding) 2rem;
      gap: 0.875rem;
    }

    .hero-footer {
      gap: 0.875rem;
    }
  }

  @media (max-width: 420px) {
    .hero-content {
      padding: 1.25rem var(--shared-inner-padding) 1.75rem;
    }

    .hero-logo {
      top: 1rem;
      left: 1rem;
      width: clamp(6.75rem, 38vw, 8.5rem);
    }

    .hero-subhead {
      font-size: 1rem;
    }
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  /* ORGANIZER EDITORIAL SECTION                     */
  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .org-section {
    scroll-margin-top: 5rem;
  }

  .org-inner {
    position: relative;
    background: var(--colors-indigo-10);
    margin: 0 auto;
    padding: var(--shared-inner-padding);
    border-radius: 1.6rem;
  }

  /* Label â€” sticky eyebrow through the features section */
  .org-label,
  .att-label {
    position: sticky;
    top: var(--grid-padding);
    z-index: 200;
    color: var(--colors-ink-0);
    font-size: var(--font-size-m);
    letter-spacing: 0.1ch;
    margin-bottom: 1.5rem;
    background: var(--colors-yellow-95);
    padding: 1rem;
    display: inline-block;
    border-radius: 0.5rem;
  }

  /* Heading */
  .org-heading {
    color: var(--colors-teal-90);
    max-width: 25ch;
  }

  /* Intro */
  .org-intro {
    font-family: var(--font-sans);
    font-size: var(--font-size-xl);
    max-width: 54ch;
  }


  /* â”€â”€â”€ Stacking Feature Cards â”€â”€â”€ */
  .org-features {
    position: relative;
    padding: 10vh 0;
    color: var(--colors-ink-10);
  }

  .org-feature {
    position: sticky;
    top: 10vh;
    z-index: calc(var(--card-index) + 1);
    min-height: 40vh;
    padding: 2rem;
    background: var(--colors-ink-90);
    border-radius: 2rem;
    /* box-shadow: 0 4px 40px rgba(0, 0, 0, 0.08); */
    display: flex;
    gap: 3rem;
    flex-direction: column;
    justify-content: space-between;
    transform-origin: top center;
    will-change: transform;
    margin-bottom: 8rem;
    overflow: hidden;
  }

  .org-feature:last-child {
    margin-bottom: 0;
    background: var(--colors-teal-90);
  }

  @media (min-width: 768px) {
    .org-feature {
      /* min-height: 80vh; */
      padding: 3rem;
      border-radius: 2rem;
    }
  }

  @media (min-width: 2000px) {
    .org-feature {
      padding: 3.5rem 4rem;
    }
  }

  /* â”€â”€â”€ Card Header â”€â”€â”€ */
  .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  }

  .card-label {
    font-family: var(--font-mono);
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: var(--colors-indigo-50);
  }

  .card-meta {
    font-family: var(--font-mono);
    font-size: 0.65rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--colors-indigo-60);
  }

  /* â”€â”€â”€ Card Body â”€â”€â”€ */
  .card-body {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  /* â”€â”€â”€ Card Icon â”€â”€â”€ */
  .card-icon {
    width: clamp(2.5rem, 5vw, 10rem);
    height: clamp(2.5rem, 5vw, 10rem);
    color: var(--colors-ink-99);
    background: var(--colors-indigo-10);
    padding: 2rem;
    border-radius: 50%;
    align-self: flex-end;
    /* margin-bottom: 1.5rem; */
  }

  .card-icon svg {
    width: 100%;
    height: 100%;
  }

  .org-feature-title {
    font-family: var(--font-heading);
    font-size: clamp(2.5rem, 5vw, 5rem);
    /* font-weight: 600; */
    /* margin: 0 0 1.5rem; */
    color: var(--colors-bright-indigo-30);
    line-height: 1.1;
    margin: 0 0 2rem;
  }

  .org-feature-body {
    font-size: var(--font-size-xl);
    max-width: 48ch;
    margin: 0;
  }

  /* â”€â”€â”€ Card Footer â”€â”€â”€ */
  .card-footer {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
  }

  .org-feature-num {
    font-family: var(--font-heading);
    /* font-style: italic; */
    font-size: clamp(2.5rem, 4vw, 5rem);
    font-weight: 400;
    line-height: 1;
    color: var(--colors-indigo-40);
  }

  .card-hint {
    font-family: var(--font-mono);
    font-size: 0.65rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--colors-indigo-60);
  }

  /* â”€â”€â”€ Proof Card (Burning Man) â”€â”€â”€ */
  .card-body--proof {
    flex-direction: column;
    gap: 2rem;
  }

  @media (min-width: 768px) {
    .card-body--proof {
      flex-direction: row;
      align-items: center;
      gap: 3rem;
    }
  }

  .proof-text {
    flex: 1;
    min-width: 0;
  }

  .proof-device {
    flex-shrink: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    width: 200px;
    height: 426px;
    border-radius: 33px;
    transform: rotate(1.781deg);
  }

  .proof-device video {
    position: relative;
    width: 220px;
    height: auto;
    background: #000;
    display: block;
  }

  @media (min-width: 768px) {
    .proof-device video {
      width: 220px;
    }
  }

  /* Reduced motion: disable sticky stacking, show as plain list */
  @media (prefers-reduced-motion: reduce) {
    .org-feature {
      position: relative;
      top: auto;
      min-height: auto;
      transform: none !important;
      opacity: 1 !important;
      will-change: auto;
    }
    .feature-pills li {
      transform: none !important;
      will-change: auto;
    }
  }

  /* â”€â”€â”€ Organizer CTA â”€â”€â”€ */
  .org-cta {
    margin-top: 4rem;
    padding-top: 3rem;
    border-top: 1px solid var(--colors-indigo-90);
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 2rem;
  }

  @media (min-width: 768px) {
    .org-cta {
      margin-top: 6rem;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      gap: 3rem;
    }
  }

  .org-cta-text {
    font-family: var(--font-sans);
    font-size: 1.25rem;
    line-height: 1.5;
    font-weight: 350;
    max-width: 40ch;
    color: var(--colors-indigo-20);
    margin: 0;
  }

  /* â”€â”€â”€ Directional Scroll Reveals â”€â”€â”€ */
  .scroll-reveal[data-reveal="left"] {
    transform: translateX(-40px) translateY(0);
  }

  .scroll-reveal[data-reveal="right"] {
    transform: translateX(40px) translateY(0);
  }

  .scroll-reveal[data-reveal="scale"] {
    transform: scale(0.95) translateY(0);
  }

  .scroll-reveal[data-reveal="left"].in-view,
  .scroll-reveal[data-reveal="right"].in-view,
  .scroll-reveal[data-reveal="scale"].in-view {
    opacity: 1;
    transform: translateX(0) translateY(0) scale(1);
  }

  /* â”€â”€â”€ NETWORK BREAK â”€â”€â”€ */
  .network-break-inner {
    background: var(--colors-ink-90);
    padding: 4rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    border-radius: 1.6rem;
    color: var(--colors-ink-0);
  }

  .network-break-heading {
    font-size: clamp(2rem, 5vw, 4rem);
    margin-bottom: 0;
  }

  .network-break-body {
    max-width: 50ch;
    font-size: var(--font-size-xl);
  }

  .network-break-kicker {
    font-weight: 700;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  /* ATTENDEE SECTION                                */
  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .att-section {
    scroll-margin-top: 5rem;
    margin-top: 2rem;
  }

  .att-inner {
    margin: 0 auto;
    padding: var(--shared-inner-padding);
  }

  .att-heading {
    margin: 0 0 1rem;
  }

  @media (min-width: 768px) {
    .att-heading {
      margin-bottom: 1.25rem;
    }
  }

  .att-bridge {
    margin: 0 0 2rem;
    max-width: 54ch;
  }

  @media (min-width: 768px) {
    .att-bridge {
      margin-bottom: 3rem;
    }
  }

  .att-content {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  @media (min-width: 1100px) {
    .att-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
      align-items: center;
    }
  }

  /* â”€â”€â”€ PHONE CLUSTER â”€â”€â”€ */
  .phone-cluster {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 440px;
    padding: 2rem 0;
  }

  @media (min-width: 1100px) {
    .phone-cluster {
      min-height: 560px;
    }
  }

  .phone-mockup {
    position: absolute;
    top: 42px;
    left: 50%;
    width: 220px;
    height: auto;
    max-width: none;
    z-index: 1;
  }

  .phone-sizzle {
    position: relative;
    z-index: 1000;
    width: 230px;
    border-radius: 6px;
    border: 2px solid var(--colors-bright-ink-10);
    overflow: hidden;
    box-shadow: 4px 4px 24px var(--colors-teal-200, #75F1EA);
  }

  .phone-sizzle video {
    display: block;
    width: 100%;
    height: auto;
    background: #000;
  }

  .phone-chat {
    transform: translateX(-190px) rotate(-1.781deg);
    z-index: 1;
  }

  .phone-ar {
    transform: translateX(-25px) rotate(1.781deg);
    z-index: 1;
  }

  @media (min-width: 1100px) {
    .phone-mockup {
      width: 250px;
      top: 70px;
    }

    .phone-chat {
      transform: translateX(-250px) rotate(-1.781deg);
    }

    .phone-ar {
      transform: translateX(0px) rotate(1.781deg);
    }
  }

  @media (max-width: 767px) {
    .phone-cluster {
      min-height: 380px;
    }

    .phone-mockup {
      width: 170px;
      top: 58px;
    }

    .phone-chat {
      transform: translateX(-155px) rotate(-1.781deg);
    }

    .phone-ar {
      transform: translateX(-15px) rotate(1.781deg);
    }

    .phone-sizzle {
      width: 180px;
    }
  }

  @media (max-width: 420px) {
    .phone-cluster {
      min-height: 340px;
    }

    .phone-mockup {
      width: 150px;
      top: 62px;
    }

    .phone-chat {
      transform: translateX(-138px) rotate(-1.781deg);
    }

    .phone-ar {
      transform: translateX(-12px) rotate(1.781deg);
    }

    .phone-sizzle {
      width: 165px;
    }
  }

  /* â”€â”€â”€ FEATURE PILLS â”€â”€â”€ */
  .feature-pills {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
  }

  .feature-pills li {
    background: var(--pill-bg);
    color: var(--colors-indigo-10);
    border-radius: 1rem;
    padding: 0.75rem 1.25rem;
    font-size: 0.9rem;
    line-height: 1.4;
    display: inline-flex;
    align-items: baseline;
    gap: 0.5rem;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    will-change: transform;
  }

  .pill-icon {
    font-size: 1.1rem;
    flex-shrink: 0;
  }

  .feature-pills strong {
    font-weight: 600;
    color: var(--colors-indigo-10);
  }

  .pill-desc {
    color: var(--colors-indigo-30);
  }

  /* â”€â”€â”€ PULL QUOTE â”€â”€â”€ */
  .pull-quote {
    margin: 8rem 0 0;
    padding: 10vw 10vw 8vw;
    background: var(--colors-fuchsia-90);
    text-align: center;
    border-radius: 1.6rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4rem;
    font-family: var(--font-heading);
    font-size: clamp(1.75rem, 5vw + 0.5rem, 10rem);
    line-height: 1.15;
    color: var(--colors-indigo-40);
    font-weight: 700;
    margin-left: auto;
    margin-right: auto;
    margin-inline: auto;
  }

  .pull-quote-cta {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.75rem;
  }

  .pull-quote-support {
    color: var(--colors-indigo-40);
    font-size: var(--font-size-xl);
  }

  /* â”€â”€â”€ TESTIMONIALS â”€â”€â”€ */
  .testimonials-section {
    padding-block: 2rem 6rem;
  }

  .testimonials-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
    max-width: 1200px;
    margin: 0 auto;
    align-items: start;
  }

  @media (min-width: 768px) {
    .testimonials-grid {
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
    }
  }

  /* â”€ Card base â”€ */
  .testimonial-card {
    position: relative;
    display: flex;
    flex-direction: column;
    min-height: 14rem;
    margin: 0;
    padding: 2.5rem 2rem 2rem;
    border-radius: 1.25rem;
    background: var(--colors-ink-90);
    transition: transform 0.35s ease, border-color 0.35s ease, box-shadow 0.35s ease;
    overflow: hidden;
  }

  .testimonial-card::before {
    content: '';
    position: absolute;
    top: 0; right: 0; bottom: 0; left: 0;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
  }

  @media (min-width: 768px) {
    .testimonial-featured {
      grid-column: 1 / -1;
    }
  }

  /* â”€ Decorative quote mark â”€ */
  .testimonial-quote-mark {
    display: block;
    font-family: var(--font-heading);
    font-size: 4rem;
    line-height: 1;
    color: var(--colors-indigo-30);
    margin-bottom: -0.5rem;
    -webkit-user-select: none;
    user-select: none;
  }

  /* â”€ Quote text â”€ */
  .testimonial-text {
    font-family: var(--font-heading);
    font-size: clamp(1.25rem, 2vw + 0.25rem, 1.75rem);
    font-weight: 500;
    line-height: 1.3;
    color: var(--colors-indigo-30);
    margin: 0 0 2rem;
    max-width: 36ch;
  }

  .testimonial-featured .testimonial-text {
    font-size: clamp(1.5rem, 3vw + 0.25rem, 2.5rem);
    line-height: 1.2;
    max-width: 28ch;
  }

  .testimonial-featured {
    min-height: 16rem;
  }

  /* â”€ Footer with avatar + meta â”€ */
  .testimonial-footer {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-top: auto;
  }

  .testimonial-meta {
    display: flex;
    flex-direction: column;
    gap: 0.15rem;
  }

  .testimonial-name {
    font-family: var(--font-mono);
    font-size: 0.8rem;
    font-style: normal;
    color: var(--colors-ink-30);
    letter-spacing: 0.08em;
    text-transform: uppercase;
    font-weight: 600;
  }

  .testimonial-role {
    font-family: var(--font-mono);
    font-size: 0.7rem;
    color: var(--colors-ink-30);
    letter-spacing: 0.06em;
  }
</style>
